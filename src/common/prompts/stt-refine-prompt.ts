import { STTRefineDto, STTRefineSegmentsDto } from "src/analysis/analysis.dto";

export const BuildSttRefinePrompt = ({
  questionText,
  jobRole,
  words,
}: STTRefineDto) => {
  const lines: string[] = [];

  lines.push(
    `ë‹¹ì‹ ì€ ë©´ì ‘ì— ì°¸ê°€í•œ ì§€ì›ìë¥¼ í‰ê°€í•˜ëŠ” AI ë©´ì ‘ ë‹µë³€ í‰ê°€ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.`,
  );

  if (questionText) {
    lines.push(`\në‹µë³€í•œ ì§ˆë¬¸:\n${questionText}`);
  }
  if (jobRole) {
    lines.push(
      `- ì´ ì§ˆë¬¸ì— ${jobRole} ì§êµ°ì˜ ì§€ì›ìê°€ ë‹µë³€í–ˆìŠµë‹ˆë‹¤. ë‹¨ì–´ë¥¼ ë³´ì •í•  ë•Œ, í•´ë‹¹ ì§êµ°ì˜ ì§€ì›ìê°€ ë©´ì ‘ ìƒí™©ì—ì„œ ë§ì´ ì‚¬ìš©í• ë§Œí•œ ì „ë¬¸ ë‹¨ì–´ë¥¼ ìœ„ì£¼ë¡œ ë³´ì •í•´ë³´ì„¸ìš”. íŠ¹íˆ ì˜ì–´ì „ë¬¸ ë‹¨ì–´ìš”.`,
    );
  }

  lines.push(
    `
ì•„ë˜ëŠ” ì§ˆë¬¸ì— ëŒ€í•œ ì§€ì›ìì˜ ë°œí™”ë¡œë¶€í„° Whisper STTê°€ ì¶”ì¶œí•œ ë‹¨ì–´ ë¦¬ìŠ¤íŠ¸ì…ë‹ˆë‹¤.
ë¬¸ì¥ì˜ íë¦„ê³¼ ì§ˆë¬¸ì˜ ì˜ë„ì— ë§ê²Œ ë§ì¶¤ë²•ì´ í‹€ë ¸ê±°ë‚˜, í•„ì‚¬ê°€ í‹€ë¦° ë‹¨ì–´ë§Œ ë³´ì •í•˜ì„¸ìš”.
í•´ë‹¹ ë‹¨ì–´ ë¦¬ìŠ¤íŠ¸ëŠ” ì˜¤ë””ì˜¤ ì¬ìƒê³¼ ë™ê¸°í™”ë˜ì–´ í•˜ì´ë¼ì´íŠ¸ì— ì‚¬ìš©ë©ë‹ˆë‹¤.

ì¡°ê±´:
1) ì ì ˆí•œ ìœ„ì¹˜ì— ì‰¼í‘œ(,)ë‚˜ ë§ˆì¹¨í‘œ(.)ë¥¼ ì‚½ì…, êµ¬ë‘ì ì€ ì• ë‹¨ì–´ ê¼¬ë¦¬ì—ë§Œ ë¶™ì„(., ,).
2) ê¸°ìˆ  ìš©ì–´ëŠ” ì •í™• í‘œê¸° (ì˜ˆ: Figma, Excel, async, Promise, import ë“±)
3) ì¤‘ìš”. **í•œêµ­ì–´ë¡œ ì˜ëª» ë°œìŒ/ì² ìëœ ê¸°ìˆ  ìš©ì–´ëŠ” ì›ë˜ ì˜ë¬¸ í‘œê¸°ë‚˜ í†µìš© í‘œê¸°ë¡œ ë³µì›**
4) ë‹¨ì–´ **ìˆœì„œ ìœ ì§€**
5) ë‹¨ì–´ **ê°œìˆ˜ ìœ ì§€** (ìƒˆ ë‹¨ì–´ë‚˜ ë¬¸ì¥ ê¸ˆì§€, êµ¬ë‘ì ë§Œ ë³´ì •)
6) ë§ˆí¬ë‹¤ìš´ ì½”ë“œ ë¸”ë¡ ê¸ˆì§€
7) ì¶œë ¥ì€ **ì…ë ¥ê³¼ ë™ì¼í•œ ê¸¸ì´ì˜ ë¬¸ìì—´ ë°°ì—´**ë§Œ
8) ì˜ë‹¨ì–´ë¥¼ í•©ì¹˜ì§€ ë§ ê²ƒ ("useEffect" ê°™ì€ ë‹¨ì–´ë„ "use", "Effect"ì²˜ëŸ¼ ëŠì–´ì„œ ìœ ì§€)
9) ì¶œë ¥ ë°°ì—´ ê¸¸ì´ê°€ ì…ë ¥ê³¼ ë‹¤ë¥´ë©´ ì‹¤íŒ¨ì…ë‹ˆë‹¤. ì ˆëŒ€ ì„±ê³µìœ¼ë¡œ ê°„ì£¼í•˜ì§€ ë§ˆì„¸ìš”.

ğŸ‘‡ ë°˜ë“œì‹œ ì•„ë˜ í˜•ì‹ì˜ JSON ë°°ì—´ë§Œ ì¶œë ¥ (ì„¤ëª…/ì½”ë“œë¸”ë¡/ë”°ì˜´í‘œ ì¥ì‹ ê¸ˆì§€), **ì…ë ¥ë°°ì—´ê³¼ ì¶œë ¥ë°°ì—´ì˜ ê¸¸ì´ëŠ” ë°˜ë“œì‹œ ë™ì¼í•´ì•¼í•¨.** 
í˜•ì‹ ì˜ˆì‹œ: ["HTML,", "CSS,", "ë Œë”ë§í•©ë‹ˆë‹¤."]

ì…ë ¥ ë‹¨ì–´:
${JSON.stringify(words.map((w) => w.word))}
`.trim(),
  );

  return lines.join("\n");
};

export const BuildSttRefinePromptV2 = ({
  questionText,
  jobRole,
  words,
}: {
  questionText?: string;
  jobRole?: string;
  words: { id: string; word: string }[];
}) => {
  const lines: string[] = [];

  lines.push(
    `ë‹¹ì‹ ì€ ë©´ì ‘ì— ì°¸ê°€í•œ ì§€ì›ìë¥¼ í‰ê°€í•˜ëŠ” AI ë©´ì ‘ ë‹µë³€ í‰ê°€ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.`,
  );

  if (questionText) {
    lines.push(`\në‹µë³€í•œ ì§ˆë¬¸:\n${questionText}`);
  }
  if (jobRole) {
    lines.push(
      `- ì´ ì§ˆë¬¸ì— ${jobRole} ì§êµ°ì˜ ì§€ì›ìê°€ ë‹µë³€í–ˆìŠµë‹ˆë‹¤. ë‹¨ì–´ë¥¼ ë³´ì •í•  ë•Œ, í•´ë‹¹ ì§êµ°ì˜ ì§€ì›ìê°€ ë©´ì ‘ ìƒí™©ì—ì„œ ë§ì´ ì‚¬ìš©í• ë§Œí•œ ì „ë¬¸ ë‹¨ì–´ë¥¼ ìœ„ì£¼ë¡œ ë³´ì •í•´ë³´ì„¸ìš”.`,
    );
  }

  lines.push(
    `
ì•„ë˜ëŠ” ì§ˆë¬¸ì— ëŒ€í•œ ì§€ì›ìì˜ ë°œí™”ë¡œë¶€í„° Whisper STTê°€ ì¶”ì¶œí•œ ë‹¨ì–´ ë¦¬ìŠ¤íŠ¸ì…ë‹ˆë‹¤.
ë¬¸ì¥ì˜ íë¦„ê³¼ ì§ˆë¬¸ì˜ ì˜ë„ì— ë§ê²Œ ë§ì¶¤ë²•ì´ í‹€ë ¸ê±°ë‚˜, í•„ì‚¬ê°€ í‹€ë¦° ë‹¨ì–´ë§Œ ë³´ì •í•˜ì„¸ìš”.
í•´ë‹¹ ë‹¨ì–´ ë¦¬ìŠ¤íŠ¸ëŠ” ì˜¤ë””ì˜¤ ì¬ìƒê³¼ ë™ê¸°í™”ë˜ì–´ í•˜ì´ë¼ì´íŠ¸ì— ì‚¬ìš©ë©ë‹ˆë‹¤.

ì…ë ¥ì€ Whisper ì¶”ì¶œ ë‹¨ì–´ ë¦¬ìŠ¤íŠ¸ì…ë‹ˆë‹¤(ì˜¤ë””ì˜¤ì™€ ë™ê¸°í™”). **ê° í•­ëª©ì€ {id, word}** ì…ë‹ˆë‹¤.
- ë‹¨ì–´ ìˆœì„œ ìœ ì§€, ë‹¨ì–´ ê°œìˆ˜ ìœ ì§€, **idëŠ” ì…ë ¥ê³¼ ë™ì¼** (ì¬ë°°ì—´/ëˆ„ë½/ì¶”ê°€ ê¸ˆì§€)

ì¡°ê±´:
1) ì ì ˆí•œ ìœ„ì¹˜ì— ì‰¼í‘œ(,)ë‚˜ ë§ˆì¹¨í‘œ(.)ë¥¼ ì‚½ì…
2) ê¸°ìˆ  ìš©ì–´ëŠ” ì •í™• í‘œê¸° (ì˜ˆ: Figma, Excel, async, Promise, import ë“±)
3) ì¤‘ìš”. **í•œêµ­ì–´ë¡œ ì˜ëª» ë°œìŒ/ì² ìëœ ê¸°ìˆ  ìš©ì–´ëŠ” ì›ë˜ ì˜ë¬¸ í‘œê¸°ë‚˜ í†µìš© í‘œê¸°ë¡œ ë³µì›**
4) ë‹¨ì–´ **ìˆœì„œ ìœ ì§€**
5) ë‹¨ì–´ **ê°œìˆ˜ ìœ ì§€** (ìƒˆ ë‹¨ì–´ë‚˜ ë¬¸ì¥ ê¸ˆì§€, êµ¬ë‘ì ë§Œ ë³´ì •)
6) ë§ˆí¬ë‹¤ìš´ ì½”ë“œ ë¸”ë¡ ê¸ˆì§€
7) ì¶œë ¥ì€ **ì…ë ¥ê³¼ ë™ì¼í•œ ê¸¸ì´ì˜ ë¬¸ìì—´ ë°°ì—´**ë§Œ
8) ì˜ë‹¨ì–´ë¥¼ í•©ì¹˜ì§€ ë§ ê²ƒ ("useEffect" ê°™ì€ ë‹¨ì–´ë„ "use", "Effect"ì²˜ëŸ¼ ëŠì–´ì„œ ìœ ì§€)
9) ì¶œë ¥ ë°°ì—´ ê¸¸ì´ê°€ ì…ë ¥ê³¼ ë‹¤ë¥´ë©´ ì‹¤íŒ¨ì…ë‹ˆë‹¤. ì ˆëŒ€ ì„±ê³µìœ¼ë¡œ ê°„ì£¼í•˜ì§€ ë§ˆì„¸ìš”.
10) **idëŠ” ì…ë ¥ê³¼ 100% ë™ì¼**í•´ì•¼ í•©ë‹ˆë‹¤. idê°€ ë‹¤ë¥´ë©´ ì‹¤íŒ¨ì…ë‹ˆë‹¤.

ğŸ‘‡ ë°˜ë“œì‹œ ì•„ë˜ í˜•ì‹ì˜ JSON ë°°ì—´ë§Œ ì¶œë ¥ (ì„¤ëª…/ì½”ë“œë¸”ë¡/ë”°ì˜´í‘œ ì¥ì‹ ê¸ˆì§€)
[{"id":"w-0","word":"..."},{"id":"w-1","word":"..."}]

ì…ë ¥ ë‹¨ì–´:
${JSON.stringify(words)}
`.trim(),
  );

  return lines.join("\n");
};

export const BuildSttRefinePromptV3 = ({
  questionText,
  jobRole,
  words,
}: STTRefineDto) => {
  const lines: string[] = [];

  lines.push(
    `ë‹¹ì‹ ì€ STT(Whisper) ë‹¨ì–´ë¥¼ **ìë¦¬/ê°œìˆ˜/í† í°í™” ê·¸ëŒ€ë¡œ** ìœ ì§€í•˜ë©´ì„œ,
ì˜¤íƒˆì, ê¸°ìˆ ìš©ì–´, ê·¸ë¦¬ê³  ì ì ˆí•œ ìœ„ì¹˜ì— êµ¬ë‘ì ì„ ë³´ì •í•˜ëŠ” AI í¸ì§‘ê¸°ì…ë‹ˆë‹¤.`,
  );

  if (questionText) {
    lines.push(`\nì§ˆë¬¸:\n${questionText}`);
  }
  if (jobRole) {
    lines.push(
      `- ì´ ì§ˆë¬¸ì— ${jobRole} ì§êµ°ì˜ ì§€ì›ìê°€ ë‹µë³€í–ˆìŠµë‹ˆë‹¤. í•´ë‹¹ ì§êµ°ì—ì„œ ë§ì´ ì“°ëŠ” **ì˜ë¬¸ ê¸°ìˆ ìš©ì–´**ëŠ” ì› í‘œê¸°(ì˜ˆ: async, Promise, TTL, Figma, Excel ë“±)ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.`,
    );
  }

  lines.push(
    `
[í•µì‹¬ ê·œì¹™]
1) **ì¸ë±ìŠ¤ i ì…ë ¥ í† í° â†’ ì¸ë±ìŠ¤ i ì¶œë ¥ í† í°** (1:1 ëŒ€ì‘, ìˆœì„œ/ê°œìˆ˜ ê³ ì •, ë¶„í• /ë³‘í•© ê¸ˆì§€)
2) êµ¬ë‘ì ë„ ë³´ì • ëŒ€ìƒ: ì ì ˆí•œ ìœ„ì¹˜ì— ì‰¼í‘œ(,)ë‚˜ ë§ˆì¹¨í‘œ(.)ë¥¼ ì‚½ì…, êµ¬ë‘ì ì€ ì• ë‹¨ì–´ ê¼¬ë¦¬ì—ë§Œ ë¶™ì„(., ,).
3) ê¸°ìˆ ìš©ì–´ëŠ” ì˜ë¬¸ í†µìš© í‘œê¸°ë¡œ ë³µì› (ì˜ˆ: í”„ë¡œë¯¸ìŠ¤â†’Promise, ë ˆì´í„´ì‹œâ†’latency, í”¼ê·¸ë§ˆâ†’Figma)
4) ì½”ë“œë¸”ë¡/ì„¤ëª…/ë©”íƒ€í…ìŠ¤íŠ¸ ì¶œë ¥ ê¸ˆì§€

[í† í°í™” ê³ ì • ì˜ˆì‹œ]
- ì…ë ¥: ["ìœ ì¦ˆ", "ì´í™íŠ¸ë¥¼"]  â†’ ì¶œë ¥: {"refined_words":["use","Effectë¥¼"]}
  (ì…ë ¥ì´ 2í† í°ì´ë©´ **ë°˜ë“œì‹œ 2í† í° ìœ ì§€**. ê° í† í° ì•ˆì—ì„œë§Œ ë³´ì •)
- ì…ë ¥: ["ìœ ì¦ˆì´í™íŠ¸ëŠ”"]      â†’ ì¶œë ¥: {"refined_words":["useEffectëŠ”"]}
  (ì…ë ¥ì´ 1í† í°ì´ë©´ **ë°˜ë“œì‹œ 1í† í° ìœ ì§€**. í•©ì¹˜ê±°ë‚˜ ìª¼ê°œì§€ ì•ŠìŒ)

[ì¶œë ¥ í˜•ì‹ (ë°˜ë“œì‹œ ì•„ë˜ JSON í•œ ì¤„ë§Œ)]
{"refined_words":["í† í°0","í† í°1",...]}  // ì…ë ¥ê³¼ **ê¸¸ì´ ë™ì¼**

[ì…ë ¥ ë°°ì—´(JSON)]
${JSON.stringify(words.map((w) => w.word))}
`.trim(),
  );

  return lines.join("\n");
};

export const BuildSttRefinePromptV4 = ({
  questionText,
  jobRole,
  words,
}: STTRefineDto) => {
  const lines: string[] = [];

  lines.push(
    `ë‹¹ì‹ ì€ STT(Whisper) ë‹¨ì–´ë¥¼ **ìë¦¬/ê°œìˆ˜/í† í°í™” ê·¸ëŒ€ë¡œ** ìœ ì§€í•˜ë©´ì„œ,
ì˜¤íƒˆì, ê¸°ìˆ ìš©ì–´, ê·¸ë¦¬ê³  ì ì ˆí•œ ìœ„ì¹˜ì— êµ¬ë‘ì ì„ ë³´ì •í•˜ëŠ” AI í¸ì§‘ê¸°ì…ë‹ˆë‹¤.`,
  );

  if (questionText) {
    lines.push(`\nì§ˆë¬¸:\n${questionText}`);
  }
  if (jobRole) {
    lines.push(
      `- ì´ ì§ˆë¬¸ì— ${jobRole} ì§êµ°ì˜ ì§€ì›ìê°€ ë‹µë³€í–ˆìŠµë‹ˆë‹¤. í•´ë‹¹ ì§êµ°ì—ì„œ ë§ì´ ì“°ëŠ” **ì˜ë¬¸ ê¸°ìˆ ìš©ì–´**ëŠ” ì› í‘œê¸°(ì˜ˆ: async, Promise, TTL, Figma, Excel ë“±)ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.`,
    );
  }

  lines.push(
    `

[ì•ˆí‹°-ë“œë¦¬í”„íŠ¸ ê·œì¹™]
- **ì¸ë±ìŠ¤ i ì…ë ¥ í† í° â†’ ì¸ë±ìŠ¤ i ì¶œë ¥ í† í°**(1:1). **ìˆœì„œ/ê°œìˆ˜/í† í° ê²½ê³„** ì ˆëŒ€ ë³€ê²½ ê¸ˆì§€(ë¶„í• Â·ë³‘í•©Â·ì¬ë°°ì—´ ê¸ˆì§€).
- **í™•ì‹ ì´ ë‚®ìœ¼ë©´** í•´ë‹¹ í† í°ì€ **ì›ë¬¸ ê·¸ëŒ€ë¡œ ìœ ì§€**í•©ë‹ˆë‹¤(ì˜¤ë²„-ë³´ì • ê¸ˆì§€).
- ì ˆëŒ€ ìƒˆë¡œìš´ ê³µë°±ì„ ë§Œë“¤ì§€ ë§ê³ , ì…ë ¥ í† í° ë‚´ë¶€ì˜ ê³µë°±/í•˜ì´í”ˆ/ì–¸ë”ìŠ¤ì½”ì–´ ìœ ë¬´ë¥¼ ê·¸ëŒ€ë¡œ ë”°ë¦…ë‹ˆë‹¤.

[ì˜ë‹¨ì–´/ì¡°ì‚¬ ì²˜ë¦¬ ê·œì¹™]
- **ì˜ë‹¨ì–´ ë•Œë¬¸ì— ë°€ë¦¼ ê¸ˆì§€**: ì…ë ¥ì´ í•œ í† í°ì´ë©´ ì¶œë ¥ë„ ë°˜ë“œì‹œ í•œ í† í°ì…ë‹ˆë‹¤.
  - ì˜ˆ) ì…ë ¥: ["ìœ ì¦ˆì´í™íŠ¸ëŠ”"] â†’ ì¶œë ¥: {"refined_words":["useEffectëŠ”"]}
- **ì˜ë‹¨ì–´+ì¡°ì‚¬ ê²°í•©ì€ í•œ í† í° ì•ˆì—ì„œë§Œ ë³´ì •**:
  - ì˜ˆ) ["ì´í™íŠ¸ë¥¼"] â†’ ["Effectë¥¼"], ["í‹°í‹°ì—˜ì€"] â†’ ["TTLì€"]
- ì…ë ¥ì´ ë‘ í† í°ì´ë©´ ì¶œë ¥ë„ ë‘ í† í°:
  - ì˜ˆ) ["ìœ ì¦ˆ","ì´í™íŠ¸ë¥¼"] â†’ ["use","Effectë¥¼"], ["í”¼ê·¸","ë§ˆë¥¼"] â†’ ["Fig","maë¥¼"]

[êµ¬ë‘ì  ê·œì¹™(ê°•ì œ)]
- ë¬¸ì¥ ëì—ëŠ” **ë°˜ë“œì‹œ ë§ˆì¹¨í‘œ(.)**ë¥¼ ë¶™ì…ë‹ˆë‹¤.
- ì ˆ/í˜¸í¡ì´ ëŠê¸°ëŠ” ì ‘ì†ë¶€ì—ëŠ” **ì‰¼í‘œ(,)** ë¥¼ ë¶™ì…ë‹ˆë‹¤.
- êµ¬ë‘ì ì€ **í•­ìƒ ì• ë‹¨ì–´ ê¼¬ë¦¬**ì—ë§Œ ë¶™ì…ë‹ˆë‹¤(ì˜ˆ: "ë¨¼ì €," / "ì¤‘ìš”í–ˆìŠµë‹ˆë‹¤.").
- êµ¬ë‘ì ì„ ë¶™ì´ì§€ ì•Šìœ¼ë©´ **ì¶œë ¥ì€ ì‹¤íŒ¨ë¡œ ê°„ì£¼**ë©ë‹ˆë‹¤.

[ê¸ˆì§€]
- ì½”ë“œë¸”ë¡/ì„¤ëª…/ë©”íƒ€í…ìŠ¤íŠ¸ ì¶œë ¥ ê¸ˆì§€. ê°œí–‰Â·ë°±í‹±Â·íŠ¸ë¦¬í”Œë°±í‹±Â·ë”°ì˜´í‘œ ì¥ì‹ ê¸ˆì§€.
- ìˆ«ì/ë‹¨ìœ„ í‘œê¸°ëŠ” ë§¥ë½ìƒ í™•ì‹¤í•œ ê²½ìš°ì—ë§Œ ë³´ì •(e.g., "íˆíŠ¸ë¯¸ìŠ¤" â†’ "íˆíŠ¸/ë¯¸ìŠ¤" í—ˆìš©).

[í† í°í™” ê³ ì • ì˜ˆì‹œ]
- ì…ë ¥: ["ìœ ì¦ˆ", "ì´í™íŠ¸ë¥¼"]  â†’ ì¶œë ¥: {"refined_words":["use","Effectë¥¼"]}
  (ì…ë ¥ì´ 2í† í°ì´ë©´ **ë°˜ë“œì‹œ 2í† í° ìœ ì§€**. ê° í† í° ì•ˆì—ì„œë§Œ ë³´ì •)
- ì…ë ¥: ["ìœ ì¦ˆì´í™íŠ¸ëŠ”"]      â†’ ì¶œë ¥: {"refined_words":["useEffectëŠ”"]}
  (ì…ë ¥ì´ 1í† í°ì´ë©´ **ë°˜ë“œì‹œ 1í† í° ìœ ì§€**. í•©ì¹˜ê±°ë‚˜ ìª¼ê°œì§€ ì•ŠìŒ)

[ì…€í”„ì²´í¬(ë°˜ë“œì‹œ ìˆ˜í–‰)]
- ì¶œë ¥ ì§ì „ì— ë‹¤ìŒì„ ìŠ¤ìŠ¤ë¡œ ê²€ì¦í•˜ê³ , í•˜ë‚˜ë¼ë„ ì–´ê¸°ë©´ **ì›ë³¸ í† í°ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©**í•˜ì—¬ ê¸¸ì´/ê²½ê³„ ì¼ì¹˜ë¥¼ ë§ì¶”ì„¸ìš”:
  1) ì¶œë ¥ ë°°ì—´ ê¸¸ì´ == ì…ë ¥ ë°°ì—´ ê¸¸ì´
  2) ê° í† í°ì— ê°œí–‰/ë°±í‹±/ì½”ë“œë¸”ë¡/ì„¤ëª… ì—†ìŒ
  3) ì…ë ¥ í† í°ì— ì—†ë˜ ê³µë°±/í•˜ì´í”ˆ/ì–¸ë”ìŠ¤ì½”ì–´ë¥¼ ìƒˆë¡œ ë§Œë“¤ì§€ ì•ŠìŒ
  4) ë¬¸ì¥ ë§ˆì§€ë§‰ í† í°ì— ë§ˆì¹¨í‘œê°€ ë¶™ì—ˆëŠ”ì§€ í™•ì¸
  5) ì˜ë‹¨ì–´ ë•Œë¬¸ì— ë°€ë¦¼ì´ ì—†ëŠ”ì§€ ë°˜ë“œì‹œ í™•ì¸

[ì¶œë ¥ í˜•ì‹ (ë°˜ë“œì‹œ ì•„ë˜ JSON í•œ ì¤„ë§Œ)]
{"refined_words":["í† í°0","í† í°1",...]}  // ì…ë ¥ê³¼ **ê¸¸ì´ ë™ì¼**

[ì…ë ¥ ë°°ì—´(JSON)]
${JSON.stringify(words.map((w) => w.word))}
`.trim(),
  );

  return lines.join("\n");
};

// segments
export const BuildRefineSegmentsPrompt = ({
  questionText,
  jobRole,
  segments,
}: STTRefineSegmentsDto) => {
  const lines: string[] = [];

  lines.push(
    `ë‹¹ì‹ ì€ ì…ë ¥ë°›ì€ STT(Whisper) sementsì˜ í…ìŠ¤íŠ¸ë¥¼ ìµœëŒ€í•œ ìœ ì§€í•˜ë©´ì„œ,
ì˜¤íƒˆìë‚˜ íŠ¹íˆ ê¸°ìˆ ìš©ì–´ë¥¼ ìœ„ì£¼ë¡œ ë³´ì •í•˜ëŠ” AI í¸ì§‘ê¸°ì…ë‹ˆë‹¤.`,
  );

  if (questionText) {
    lines.push(`\nì§ˆë¬¸:\n${questionText}`);
  }
  if (jobRole) {
    lines.push(
      `- ì´ ì§ˆë¬¸ì— ${jobRole} ì§êµ°ì˜ ì§€ì›ìê°€ ë‹µë³€í–ˆìŠµë‹ˆë‹¤. í•´ë‹¹ ì§êµ°ì—ì„œ ë§ì´ ì“°ëŠ” **ì˜ë¬¸ ê¸°ìˆ ìš©ì–´**ë¥¼ ìƒê°í•´ë³´ì„¸ìš”.`,
    );
  }

  lines.push(
    `
[í•µì‹¬ ê·œì¹™]
1) ì›ë¬¸ì„ ë³´ì¡´í•˜ë©´ì„œ, ì˜¤íƒˆì, ê¸°ìˆ ìš©ì–´ë§Œ ë³´ì •í•˜ì„¸ìš”.
    - ìƒˆë¡œìš´ ë‹¨ì–´ë‚˜ ë¬¸ì¥ì€ ë§Œë“¤ì§€ ë§ˆì„¸ìš”.
    - ë‹¨ì–´ ìˆœì„œë‚˜ ê°œìˆ˜ë¥¼ ë°”ê¾¸ì§€ ë§ˆì„¸ìš”.
    - segmentì˜ ê²½ê³„(ë¶„í• )ë„ ë°”ê¾¸ì§€ ë§ˆì„¸ìš”.
    - ê¸°ìˆ  ìš©ì–´ëŠ” í•œêµ­ì–´ë¡œ ì˜ë‹¨ì–´ì˜ ë°œìŒì´ í‘œê¸°ëœ ì¼€ì´ìŠ¤ë§Œ ì˜ë¬¸ í†µìš© í‘œê¸°ë¡œ ë³µì›í•˜ì„¸ìš”. í™•ì‹ ì´ ì—†ìœ¼ë©´ ì›ë¬¸ ìœ ì§€. í•´ë‹¹ ì§êµ°ì˜ ê¸°ìˆ  ìš©ì–´ê°€ ì•„ë‹Œ ì¼ìƒì–´ëŠ” ì›ë¬¸ì„ ìœ ì§€.
2) ê° segmentì˜ í…ìŠ¤íŠ¸ëŠ” ì˜¤ë””ì˜¤ ì¬ìƒê³¼ ë™ê¸°í™”ë˜ì–´ í•˜ì´ë¼ì´íŠ¸ì— ì‚¬ìš©ë©ë‹ˆë‹¤.
3) ì¶œë ¥ì€ **ì…ë ¥ê³¼ ë™ì¼í•œ ê¸¸ì´ì˜ ë¬¸ìì—´ ë°°ì—´**ë§Œ
4) ì½”ë“œë¸”ë¡/ì„¤ëª…/ë©”íƒ€í…ìŠ¤íŠ¸ ì¶œë ¥ ê¸ˆì§€

[ì¶œë ¥ í˜•ì‹ (ë°˜ë“œì‹œ ì•„ë˜ JSON í•œ ì¤„ë§Œ)]
{"refined_segments":["segment1","segment2",...]}  // ì…ë ¥ê³¼ **ê¸¸ì´ ë™ì¼**

[ì…ë ¥ ë°°ì—´(JSON)]
${JSON.stringify(segments.map((s) => s.text))}
`.trim(),
  );

  return lines.join("\n");
};
